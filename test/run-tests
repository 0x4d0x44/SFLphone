#!/bin/bash

myname="`basename $0`"
failures=0

for f in *
do
    # Skip ourself
    if [ "$f" = "$myname" ]; then
        continue
    fi

    if [ -x "$f" ]; then
        echo
        echo "=== Running [$f] test ==="
        # Warning, libCppUnit returns 0 on failure.
        ./"$f" && {
            echo Warning: Failure in $f.
            failures=$((failures+1))
        }
    fi
done

echo "Tests finshed, there were $failures failures."
